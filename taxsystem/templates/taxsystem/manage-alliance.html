{% extends 'taxsystem/base.html' %}
{% load i18n %}
{% load humanize %}
{% load taxsystem %}
{% load sri %}

{% block page_title %}
    {{ title }}
{% endblock %}

{% block page_topic %}
    <h1 class="page-header text-center">
        {{ title }}
    </h1>
{% endblock page_topic %}

{% block taxsystem_block %}
    <div class="mb-4">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary rounded">
            <div class="container-fluid justify-content-start">
                <div class="collapse navbar-collapse" id="navbarexpand">
                    <!-- Navbar Tabs -->
                    <ul class="nav nav-pills w-100" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="pills-administration-tab" data-bs-toggle="pill" href="#pills-administration" role="tab" aria-controls="pills-administration" aria-selected="true">
                                <h4 class="me-3">{% translate "Administration" %}</h4>
                            </a>
                        </li>
                        <li class="nav-item ms-auto" role="presentation">
                            <a class="nav-link" id="pills-corporations-tab" data-bs-toggle="pill" href="#pills-corporations" role="tab" aria-controls="pills-corporations" aria-selected="false">
                                <h4 class="me-3">{% translate "Corporations" %}</h4>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <div class="card card-body bg-secondary tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-administration" role="tabpanel" aria-labelledby="pills-administration-tab">
            <div class="card">
                <div class="card-header bg-primary rounded-top d-flex align-items-center">
                    <h3 class="me-3">{% translate "Manage Alliance" %}</h3>
                </div>
                <div class="card-body">
                    {% include 'taxsystem/partials/manage/dashboard.html' %}

                    {% include 'taxsystem/partials/manage/paymentsystem.html' %}

                    {% include 'taxsystem/partials/manage/members.html' %}
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="pills-corporations" role="tabpanel" aria-labelledby="pills-corporations-tab">
            {% include 'taxsystem/partials/view/corporations.html' %}
        </div>
    </div>
<!-- Tab Session -->
{% include 'taxsystem/modals/modal.html' with name="ViewPayments" %}
{% include 'taxsystem/modals/modal.html' with name="ViewDetails" %}
{% endblock %}

{% block extra_css %}
{% endblock %}

{% block extra_javascript %}
    <!-- load modals -->
    {% include 'taxsystem/bundles/modal-js.html' %}
    {% include 'taxsystem/modals/members-delete.html' %}
    {% include 'taxsystem/modals/payments-reject.html' %}
    {% include 'taxsystem/modals/payments-approve.html' %}
    {% include 'taxsystem/modals/payments-undo.html' %}
    {% include 'taxsystem/modals/payments-add.html' %}
    {% include 'taxsystem/modals/payments-delete.html' %}
    {% include 'taxsystem/modals/paymentsystem-switchuser.html' %}
    <script>
        setupModal('#modalViewPaymentsContainer', 'ajax_payments', '#modalViewPaymentsContent', '#modalViewPaymentsLoader');
        setupModal('#modalViewDetailsContainer', 'ajax_details', '#modalViewDetailsContent', '#modalViewDetailsLoader');
    </script>
    <!-- load the datatables-js-bs5.html bundle -->
    {% include 'bundles/datatables-js-bs5.html' %}
    {% include "bundles/filterdropdown-js.html" %}
    {% include 'bundles/moment-js.html' with locale=True %}
    <!-- load the settings bundle -->
    {% include "taxsystem/bundles/settings-css.html" %}
    {% include 'taxsystem/bundles/settings-js.html' %}
    <!-- load the administration bundle -->
    {% include 'taxsystem/bundles/administration-bundle.html' %}
    <!-- load the corporation manage script -->
    {% sri_static 'taxsystem/js/manage.js' %}
{% endblock extra_javascript %}

{% block extra_script %}
{% endblock extra_script %}
